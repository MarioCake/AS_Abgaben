class BaseViewModel{constructor(){this.css=ko.observable(null);this.click=ko.observable(()=>{});this.style=ko.observable({})}}class CookieViewModel extends BaseViewModel{constructor(){super();this.gameState=ko.observable(null);self=this;$.ajax({url:"/GameState/GetLast",method:"GET",success:function(n){console.log(n);self.gameState(ko.mapping.fromJS(n))}});this.popups=ko.observableArray([])}addCookie(){this.gameState().money(this.gameState().money()+this.gameState().clickAmount());let n=new Popup(this.gameState().clickAmount()+"+",{x:0,y:50},{x:200,y:250});this.popups.push(n);setTimeout(this.popups.remove.bind(this.popups,n),2e3)}saveGameState(){}}class Popup extends BaseViewModel{static get upMoveRange(){return 200}static get sideMoveRange(){return 50}constructor(n,t,i){super();this.text=ko.observable(n);let r=Math.random()*(i.x-t.x)+t.x,u=Math.random()*(i.y-t.y)+t.y;this.position=ko.observable({x:r,y:u});this.runAnimation()}runAnimation(){this.css({"popup-show":!0});this.style({left:this.position().x+"px",top:this.position().y+"px"});setTimeout(()=>{this.css({"popup-hide":!0}),this.position().y-=Math.random()*Popup.upMoveRange+Popup.upMoveRange/4,this.position().x+=Math.random()*Popup.sideMoveRange-Popup.sideMoveRange/2,this.style({left:this.position().x+"px",top:this.position().y+"px"})},100)}}